[build]
  command = "npm run build"
  publish = "dist"

# Redirection vers la page de maintenance
# Astro génère /maintenance/index.html avec format: directory

# IMPORTANT: Netlify sert automatiquement les fichiers statiques existants
# avant d'appliquer les redirections. Mais pour être sûr, on liste explicitement
# les exclusions AVANT la redirection générale (ordre important)

# Servir les fichiers Astro (CSS, JS) normalement - pas de redirection
[[redirects]]
  from = "/_astro/*"
  to = "/_astro/:splat"
  status = 200
  force = false

# Servir les fichiers publics normalement
[[redirects]]
  from = "/fav.svg"
  to = "/fav.svg"
  status = 200
  force = false

[[redirects]]
  from = "/fav.png"
  to = "/fav.png"
  status = 200
  force = false

# Redirection de toutes les autres routes vers la page de maintenance
# force = true pour forcer la redirection même si un fichier existe (comme index.html)
[[redirects]]
  from = "/*"
  to = "/maintenance/"
  status = 200
  force = true
